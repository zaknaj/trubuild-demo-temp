# ==============================================================================
# TruBuild Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env files to version control!
# ==============================================================================

# ------------------------------------------------------------------------------
# General
# ------------------------------------------------------------------------------
# Image tag (used for versioning local images)
TAG=latest
# Container registry (uncomment when using a registry like ghcr.io, ecr, acr)
# REGISTRY=ghcr.io/trubuild

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
POSTGRES_USER=trubuild
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=trubuild
DATABASE_URL=postgresql://trubuild:CHANGE_ME_STRONG_PASSWORD@postgres:5432/trubuild

# ------------------------------------------------------------------------------
# App Configuration
# ------------------------------------------------------------------------------
NODE_ENV=production
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET
BETTER_AUTH_URL=https://yourdomain.com
ENGINE_URL=http://engine:5000

# ------------------------------------------------------------------------------
# Engine Configuration
# ------------------------------------------------------------------------------
# Set to true when running behind reverse proxy (SSL handled by Nginx)
TRUBUILD_DISABLE_SSL=true
# Enable encryption for user data
ENCRYPTION_ENABLED=true

# ------------------------------------------------------------------------------
# Google AI & Search
# ------------------------------------------------------------------------------
GOOGLE_API_KEY=
# Google Custom Search Engine ID (for web search functionality)
GOOGLE_CX=

# ------------------------------------------------------------------------------
# Google Cloud / Vertex AI
# ------------------------------------------------------------------------------
# Project and location for Vertex AI (credentials fetched from Vault)
GOOGLE_CLOUD_PROJECT=gen-lang-client-0502418869
VERTEX_LOCATION=us-central1

# ------------------------------------------------------------------------------
# MinIO - Internal S3-Compatible Object Storage
# ------------------------------------------------------------------------------
# Storage backend: minio (internal), aws (S3), alibaba (OSS)
STORAGE_BACKEND=minio
MINIO_ROOT_USER=trubuild
MINIO_ROOT_PASSWORD=CHANGE_ME_MIN_8_CHARS
MINIO_ENDPOINT=http://minio:9000
MINIO_BUCKET=trubuild
MINIO_SECURE=false
# KMS key for server-side encryption (production only)
# Generate with: echo -n "your-32-byte-secret-key-here!!" | base64
MINIO_KMS_SECRET_KEY=trubuild-key:eW91ci0zMi1ieXRlLXNlY3JldC1rZXktaGVyZSEh
# Backup retention in days (backups older than this are deleted)
BACKUP_RETENTION_DAYS=30

# ------------------------------------------------------------------------------
# AWS Configuration (S3 - EU/USA cloud deployments)
# ------------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1
AWS_S3_BUCKET=

# ------------------------------------------------------------------------------
# Alibaba Cloud Configuration (OSS - KSA cloud deployments)
# ------------------------------------------------------------------------------
ALIBABA_ACCESS_KEY_ID=
ALIBABA_ACCESS_KEY_SECRET=
ALIBABA_OSS_ENDPOINT=https://oss-me-central-1.aliyuncs.com
ALIBABA_OSS_BUCKET=trubuild-ksa

# ------------------------------------------------------------------------------
# Email (SendGrid)
# ------------------------------------------------------------------------------
SENDGRID_API_KEY=

# ------------------------------------------------------------------------------
# Slack Integration
# ------------------------------------------------------------------------------
SLACK_TOKEN=

# ------------------------------------------------------------------------------
# HashiCorp Vault Configuration
# ------------------------------------------------------------------------------
# Vault server address
VAULT_ADDR=http://vault:8200

# Region and Environment for secret paths (e.g., ksa/dev, uae/prod)
TRUBUILD_REGION=ksa
TRUBUILD_ENV=dev

# AppRole credentials (get from: make vault-approle REGION=ksa ENV=dev)
VAULT_ROLE_ID=
VAULT_SECRET_ID=

# Cache TTL in seconds (how often to refresh secrets from Vault)
# Default: 300 (5 minutes)
VAULT_CACHE_TTL=300

# Alternative: Direct token auth (for development only)
# VAULT_TOKEN=

# NOTE: GCP credentials are fetched from Vault at engine startup.
# Store the service account key JSON in Vault at:
#   secret/trubuild/{region}/{env}
# With key name: gemini-access-key
# The value should be the raw JSON content of the service account key file.
